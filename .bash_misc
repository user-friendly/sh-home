# 
# Miscellaneous terminal goodies.
# 

# !!!TODO Learn more about bash strings, variables, strings,
#         substitutions, patterns, etc.

export PATH="$PATH:$HOME/bin"

# Load color definitions.
if [ -f ~/.bash_colors ]; then
    . ~/.bash_colors
fi

# Escaped colors (useful for the command prompt).
if [ -f ~/.bash_colors.escaped ]; then
    . ~/.bash_colors.escaped
fi

# Allows for color overrides.
if [ -f ~/.bash_colors_override ]; then
    . ~/.bash_colors_override
fi

# Some useful aliases.
# demand confirmation for the following
LS_BASE_OPTIONS='-hx'
alias ls="ls $LS_BASE_OPTIONS"
alias rm='rm -i'
alias cp='cp -i'
alias mv='mv -i'

# Display color control chars only.
alias less='less -R'

alias ll='ls -l'
alias l='ls -lA'
alias aa='ls'
alias a='ls -A'

alias gs='git status'
alias gp='git pull'
alias grp='git reset --hard; gp'
alias gco='git checkout'

alias dr='drush'
alias drms='drush -r /apps/mags/docroot -l marthastewart.com'
alias drmw='drush -r /apps/mags/docroot -l marthastewartweddings.com'
alias drwl='drush -r /apps/mags/docroot -l wholeliving.com'
alias drug='drush -r /apps/ugc/docroot -l default'
alias drd='drush-debug'
alias drdms='drd -r /apps/mags/docroot -l marthastewart.com'
alias drdmw='drd -r /apps/mags/docroot -l marthastewartweddings.com'
alias drdwl='drd -r /apps/mags/docroot -l wholeliving.com'
alias drdug='drd -r /apps/ugc/docroot -l default'

# Enable color support of ls and also add handy aliases.
if [ -x /usr/bin/dircolors ]; then
    test -r ~/.dircolors && eval "$(dircolors -b ~/.dircolors)" || eval "$(dircolors -b)"
    alias ls='ls $LS_BASE_OPTIONS --color=auto'
    
    alias grep='grep --color=auto'
    alias fgrep='fgrep --color=auto'
    alias egrep='egrep --color=auto'
fi

# Helper functions.
function drush-debug {
    export XDEBUG_CONFIG="idekey=PHPSTORM"
    export SERVER_NAME="pivanov.dev"
    export SERVER_PORT="9000"
    drush $*
    unset XDEBUG_CONFIG
    unset SERVER_NAME
    unset SERVER_PORT
};

# TODO Not really using this function.
function function_exists() {
    declare -f -F $1;
    return $?;
}

# Custom completion functions (mostly for git aliases).
if [ -f ~/.bash_completion ]; then
    . ~/.bash_completion
fi

# Custom prompt.
if [ -f ~/.bash_prompt ]; then
    . ~/.bash_prompt
fi
